# üöÄ –ü–æ–ª–Ω—ã–π –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –≥–∞–π–¥: Docker, PostgreSQL –∏ Go-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å HTTP-—Å–µ—Ä–≤–∏—Å–æ–º

–≠—Ç–æ—Ç –≥–∞–π–¥ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º —Å –Ω—É–ª—è —Å–æ–±—Ä–∞—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–µ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –¥–ª—è –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
- –ü–æ–π–º—ë—Ç–µ –±–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã Docker.
- –ü–æ–¥–Ω–∏–º–µ—Ç–µ PostgreSQL –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ.
- –°–æ–∑–¥–∞–¥–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ Go, –∫–æ—Ç–æ—Ä–æ–µ –ø–∏—à–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –±–∞–∑—É —á–µ—Ä–µ–∑ HTTP-–∑–∞–ø—Ä–æ—Å.
- –ù–∞—Å—Ç—Ä–æ–∏—Ç–µ volume –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤.
- –°–¥–µ–ª–∞–µ—Ç–µ —Å–±–æ—Ä–∫—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω-—Å—Ç–∏–ª–µ: multi-stage build, –∑–∞–ø—É—Å–∫ –Ω–µ –æ—Ç root-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

üíª –î–ª—è –ø—Ä–∞–∫—Ç–∏–∫–∏ –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–Ω–ª–∞–π–Ω-–ø–µ—Å–æ—á–Ω–∏—Ü—É [iximiuz labs playground](https://labs.iximiuz.com/playgrounds/docker), –µ—Å–ª–∏ Docker –ª–æ–∫–∞–ª—å–Ω–æ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω.

üìù –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –∫–ª–∏–µ–Ω—Ç –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π: [DBeaver](https://dbeaver.io/download/)

üì¶ –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–∑ Postgres —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π:  
[https://hub.docker.com/_/postgres](https://hub.docker.com/_/postgres)

–ê–≤—Ç–æ—Ä —É—Ä–æ–∫–∞: **–û–ª–µ–≥ –ö–æ–∑—ã—Ä–µ–≤**  
- [Telegram –∫–∞–Ω–∞–ª](https://t.me/olezhek28go)
- [YouTube –∫–∞–Ω–∞–ª](https://www.youtube.com/@olezhek28go)

---

## üéâ –ü–æ–Ω—Ä–∞–≤–∏–ª—Å—è —É—Ä–æ–∫? –ü—Ä–æ–¥–æ–ª–∂–∏ –∏–∑—É—á–µ–Ω–∏–µ!

üîó –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥ ‚Äî —Ä–∞–∑–±–µ—Ä–∏—Å—å —Å Docker Compose!

üëâ [–£—Ä–æ–∫ –ø–æ Docker Compose: –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –±–∞–∑—ã](https://github.com/olezhek28/docker-compose-tutorial)

–¢–∞–º –º—ã:
- –ü–æ–¥–Ω–∏–º–∞–µ–º Postgres –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–µ.
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º `.env` –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ.
- –ü–æ–¥–∫–ª—é—á–∞–µ–º –º–∏–≥—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Goose.
- –ò –¥–µ–ª–∞–µ–º –ø—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤—ã–º –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞!

---

## üñºÔ∏è –°—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã Docker

[![–î–∏–∞–≥—Ä–∞–º–º–∞ Docker](https://kinsta.com/wp-content/uploads/2022/10/Docker-Diagram.png)](https://kinsta.com/blog/what-is-docker/)

> –ò—Å—Ç–æ—á–Ω–∏–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: [kinsta.com](https://kinsta.com/blog/what-is-docker/)

## üì¶ –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ Docker —Ä–∞–±–æ—Ç–∞–µ—Ç

–ó–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:

```bash
docker run hello-world
```

Docker —Å–∫–∞—á–∞–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã–π –æ–±—Ä–∞–∑ –∏ –≤—ã–≤–µ–¥–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ, –µ—Å–ª–∏ –≤—Å—ë –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ.

–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–ø–∏—Å–æ–∫ –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:

```bash
docker ps
```

–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–ø–∏—Å–æ–∫ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –æ–±—Ä–∞–∑–æ–≤:

```bash
docker images
```

---

## üåê –ü–æ–¥–Ω–∏–º–∞–µ–º Nginx –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ

```bash
docker run -d -p 80:80 --name mynginx nginx
```

–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ: [http://localhost](http://localhost)  
‚û°Ô∏è Nginx —É—Å–ø–µ—à–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç!

---

## üóÑÔ∏è –ü–æ–¥–Ω–∏–º–∞–µ–º PostgreSQL –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ

```bash
docker run -d -p 5432:5432 --name mypostgres -e POSTGRES_USER=demo -e POSTGRES_PASSWORD=demo postgres:15
```

–¢–µ–ø–µ—Ä—å –±–∞–∑–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –Ω–∞ –ø–æ—Ä—Ç—É 5432, –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å demo –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ.

---

## üêö –ó–∞—Ö–æ–¥–∏–º –≤–Ω—É—Ç—Ä—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å –±–∞–∑–æ–π

–ï—Å–ª–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –µ—Å—Ç—å bash:

```bash
docker exec -it mypostgres bash
```

–ï—Å–ª–∏ bash –Ω–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É–µ–º sh:

```bash
docker exec -it mypostgres sh
```

---

## üß© –ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ Postgres –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

```bash
psql -U demo -d postgres
```

- `-U demo` ‚Äî –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `-d postgres` ‚Äî –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

–ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –≤–Ω—É—Ç—Ä–∏ psql:
- –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã: `\dt`
- –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –æ–±—ä–µ–∫—Ç—ã: `\d`
- –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö: `\l`

–°–æ–∑–¥–∞—ë–º —Ç–∞–±–ª–∏—Ü—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:

```sql
CREATE TABLE users (
  id SERIAL PRIMARY KEY,
  username text,
  email text,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

–î–æ–±–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤—Ä—É—á–Ω—É—é:

```sql
INSERT INTO users (username, email) VALUES ('alice', 'alice@example.com');
```

–ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–∞–Ω–Ω—ã–µ:

```sql
SELECT * FROM users;
```

---

## üßπ –£–±–∏—Ä–∞–µ–º –∑–∞ —Å–æ–±–æ–π

–û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:

```bash
docker stop mypostgres
```

–£–¥–∞–ª—è–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏ –æ–±—Ä–∞–∑:

```bash
docker rmi -f mypostgres
```

–ß–∏—Å—Ç–∏–º –≤—Å–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ä–µ—Å—É—Ä—Å—ã Docker:

```bash
docker system prune
```

> ‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ: –∫–æ–º–∞–Ω–¥–∞ –æ—á–∏—Å—Ç–∏—Ç –≤—Å–µ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, –æ–±—Ä–∞–∑—ã –∏ –∫—ç—à.

---

## üíª –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –Ω–∞ —Å–≤–æ–µ–π –º–∞—à–∏–Ω–µ

- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Docker Desktop: [https://www.docker.com/products/docker-desktop/](https://www.docker.com/products/docker-desktop/)
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º DBeaver –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ: [https://dbeaver.io/download/](https://dbeaver.io/download/)

---

## üõ†Ô∏è –°–æ–∑–¥–∞—ë–º Go-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å HTTP endpoint –¥–ª—è –∑–∞–ø–∏—Å–∏ –≤ –±–∞–∑—É

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç POST-–∑–∞–ø—Ä–æ—Å —Å username –∏ email –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏—Ö –≤ —Ç–∞–±–ª–∏—Ü—É users.

–î–æ–±–∞–≤–ª—è–µ–º —Ñ–∞–π–ª `.dockerignore`, —á—Ç–æ–±—ã –Ω–µ –ø–æ–ø–∞–¥–∞–ª–∏ –ª–∏—à–Ω–∏–µ —Ñ–∞–π–ª—ã –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø—Ä–∏ —Å–±–æ—Ä–∫–µ.

–°–æ–∑–¥–∞—ë–º multi-stage Dockerfile:
- –≠—Ç–∞–ø —Å–±–æ—Ä–∫–∏ ‚Äî heavy image —Å Go SDK.
- –≠—Ç–∞–ø —Ñ–∏–Ω–∞–ª—å–Ω—ã–π ‚Äî –ª—ë–≥–∫–∏–π –ø—Ä–æ–¥–∞–∫—à–µ–Ω –æ–±—Ä–∞–∑ –Ω–∞ Alpine.
- –°–æ–±–∏—Ä–∞–µ–º —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏ —Å–ª–∏–Ω–∫–æ–≤–∞–Ω–Ω—ã–π –±–∏–Ω–∞—Ä–Ω–∏–∫.

–°–æ–±–∏—Ä–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–¥ –Ω—É–∂–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É:

```bash
docker build --platform linux/amd64 -t my-go-server:v1.0.0 .
```

–î–ª—è –ø–æ–ª–Ω–æ–π –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏ –±–µ–∑ –∫—ç—à–∞:

```bash
docker build --no-cache --platform linux/amd64 -t my-go-server:v1.0.0 .
```

–ü—Ä–æ–≤–µ—Ä—è–µ–º –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –æ–±—Ä–∞–∑–∞:

```bash
docker image inspect my-go-server:v1.0.0 --format='{{.Architecture}}/{{.Os}}'
```

–ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:

```bash
docker run -p 8080:8080 my-go-server:v1.0.0
```

---

## üîó –°–æ–∑–¥–∞—ë–º —Å–µ—Ç—å –¥–ª—è –æ–±—â–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

–°–æ–∑–¥–∞—ë–º —Å–µ—Ç—å:

```bash
docker network create app-network
```

–ó–∞–ø—É—Å–∫–∞–µ–º Postgres –≤ —Å–µ—Ç–∏:

```bash
docker run -d --name mypostgres --network app-network -p 5432:5432 -e POSTGRES_USER=demo -e POSTGRES_PASSWORD=demo postgres:15
```

–ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ —Ç–æ–π –∂–µ —Å–µ—Ç–∏:

```bash
docker run -p 8080:8080 --network app-network my-go-server:v1.0.0
```

---

## üß© –ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ –±–∞–∑–µ —á–µ—Ä–µ–∑ DBeaver

–°–æ–∑–¥–∞—ë–º –Ω–æ–≤–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:
- –•–æ—Å—Ç: `localhost`
- –ü–æ—Ä—Ç: `5432`
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: `postgres`
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: `demo`
- –ü–∞—Ä–æ–ª—å: `demo`

–°–æ–∑–¥–∞—ë–º —Ç–∞–±–ª–∏—Ü—É –≤ DBeaver:

```sql
CREATE TABLE users (
  id SERIAL PRIMARY KEY,
  username text,
  email text,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

---

## üåê –¢–µ—Å—Ç–∏—Ä—É–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ curl

–û—Ç–ø—Ä–∞–≤–ª—è–µ–º POST-–∑–∞–ø—Ä–æ—Å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

```bash
curl -X POST http://localhost:8080/users \
  -H "Content-Type: application/json" \
  -d '{"username": "alice", "email": "alice@example.com"}'
```

–ü—Ä–æ–≤–µ—Ä—è–µ–º –≤ –±–∞–∑–µ: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ—è–≤–∏–ª—Å—è üéâ

---

## üí° –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Ö—Ä–∞–Ω–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö

–û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –±–∞–∑–æ–π:

```bash
docker stop mypostgres
```

–°—Ç–∞—Ä—Ç—É–µ–º —Å–Ω–æ–≤–∞:

```bash
docker start mypostgres
```

‚úÖ –î–∞–Ω–Ω—ã–µ –æ—Å—Ç–∞—é—Ç—Å—è!

–£–¥–∞–ª—è–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:

```bash
docker rm mypostgres
```

–ó–∞–ø—É—Å–∫–∞–µ–º –∑–∞–Ω–æ–≤–æ –±–µ–∑ volume ‚Äî ‚ùå –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–ø–∞–ª–∏.

---

## üíæ –î–æ–±–∞–≤–ª—è–µ–º volume –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

–ó–∞–ø—É—Å–∫–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å volume:

```bash
docker run -d --name mypostgres --network app-network -p 5432:5432 \
  -e POSTGRES_USER=demo \
  -e POSTGRES_PASSWORD=demo \
  -v pgdata:/var/lib/postgresql/data \
  postgres:15
```

–°–æ–∑–¥–∞—ë–º —Ç–∞–±–ª–∏—Ü—É, –¥–æ–±–∞–≤–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ curl.

–û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:

```bash
docker stop mypostgres
```

–ó–∞–ø—É—Å–∫–∞–µ–º —Å–Ω–æ–≤–∞:

```bash
docker start mypostgres
```

‚úÖ –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!

---

## üßë‚Äçüíª –î–æ—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º Dockerfile –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω-—É—Ä–æ–≤–Ω—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

–î–æ–±–∞–≤–ª—è–µ–º –∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–µ –æ—Ç root-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

```Dockerfile
# –°–æ–∑–¥–∞—ë–º –Ω–µ–ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –≥—Ä—É–ø–ø—É
RUN addgroup -S appgroup && adduser -S appuser -G appgroup

# –ú–µ–Ω—è–µ–º –≤–ª–∞–¥–µ–ª—å—Ü–∞ —Ñ–∞–π–ª–æ–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
RUN chown -R appuser:appgroup /app

# –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ –Ω–µ–ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
USER appuser
```

–¢–µ–ø–µ—Ä—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –±–µ–∑–æ–ø–∞—Å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ root-–¥–æ—Å—Ç—É–ø–∞.

---

## üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è—é! –í—ã —Å–æ–±—Ä–∞–ª–∏ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å Docker, Postgres –∏ Go.

–ï—Å–ª–∏ –≤–∞–º –ø–æ–Ω—Ä–∞–≤–∏–ª—Å—è —É—Ä–æ–∫ ‚Äî –∑–∞–≥–ª—è–¥—ã–≤–∞–π—Ç–µ:
- [Telegram –∫–∞–Ω–∞–ª](https://t.me/olezhek28go) ‚Äî –ø–æ–ª–µ–∑–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏, –ª–∞–π—Ñ —Å—Ç–∞–π–ª –∏ –æ–±—Å—É–∂–¥–µ–Ω–∏–µ –≤–æ–ª–Ω—É—é—â–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –≤ –º–∏—Ä–µ IT.
- [YouTube –∫–∞–Ω–∞–ª](https://www.youtube.com/@olezhek28go) ‚Äî —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏ —Å–æ—Ñ—Ç–æ–≤—ã–µ –≤–∏–¥–µ–æ –ø—Ä–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É.

## üß© –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ–Ω—Ü–µ–ø—Ü–∏—è —Å–ª–æ—ë–≤ –≤ Docker –∏ –∑–∞—á–µ–º –Ω—É–∂–µ–Ω multi-stage build

–ö–æ–≥–¥–∞ –º—ã —Å–æ–±–∏—Ä–∞–µ–º –æ–±—Ä–∞–∑ Docker, –æ–Ω —Å—Ç—Ä–æ–∏—Ç—Å—è –∫–∞–∫ "—Å–ª–æ—ë–Ω—ã–π –ø–∏—Ä–æ–≥".  
–ö–∞–∂–¥–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –≤ Dockerfile ‚Äî —ç—Ç–æ –Ω–æ–≤—ã–π —Å–ª–æ–π. –ù–∞–ø—Ä–∏–º–µ—Ä:
- `FROM` ‚Äî –±–∞–∑–æ–≤—ã–π —Å–ª–æ–π –æ–±—Ä–∞–∑–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Alpine –∏–ª–∏ Go SDK).
- `COPY`, `RUN` ‚Äî –¥–æ–±–∞–≤–ª—è—é—Ç –Ω–æ–≤—ã–µ —Å–ª–æ–∏ —Å –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏.
- `CMD`, `EXPOSE` ‚Äî —Ç–æ–∂–µ —Ñ–∏–∫—Å–∏—Ä—É—é—Ç—Å—è –∫–∞–∫ —Å–ª–æ–∏.

Docker –∫—ç—à–∏—Ä—É–µ—Ç —Å–ª–æ–∏: –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –≤ —Å–ª–æ–µ –Ω–µ –ø–æ–º–µ–Ω—è–ª–æ—Å—å, –æ–Ω –ø—Ä–æ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —É–∂–µ –≥–æ—Ç–æ–≤—ã–π —Å–ª–æ–π, —á—Ç–æ–±—ã —É—Å–∫–æ—Ä–∏—Ç—å —Å–±–æ—Ä–∫—É.

### üì¶ –ü—Ä–æ–±–ª–µ–º–∞ –æ–±—ã—á–Ω–æ–π —Å–±–æ—Ä–∫–∏

–ï—Å–ª–∏ —Å–æ–±–∏—Ä–∞—Ç—å Go-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±–µ–∑ multi-stage build:
- –í–Ω—É—Ç—Ä–∏ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –æ–±—Ä–∞–∑–∞ –æ–∫–∞–∂–µ—Ç—Å—è –≤–µ—Å—å SDK Go, –∏—Å—Ö–æ–¥–Ω—ã–µ —Ñ–∞–π–ª—ã –∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã.
- –≠—Ç–æ —Ä–∞–∑–¥—É–≤–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –æ–±—Ä–∞–∑–∞ –∏ –º–æ–∂–µ—Ç –Ω–µ—Å—Ç–∏ –ª–∏—à–Ω–∏–µ —Ä–∏—Å–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (–≤–Ω—É—Ç—Ä–∏ –º–Ω–æ–≥–æ –ª–∏—à–Ω–µ–≥–æ).

### üöÄ –†–µ—à–µ–Ω–∏–µ ‚Äî Multi-Stage Build

Multi-stage build –ø–æ–∑–≤–æ–ª—è–µ—Ç:
- –í –æ–¥–Ω–æ–π —Å—Ç–∞–¥–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç—è–∂—ë–ª—ã–π –æ–±—Ä–∞–∑ –¥–ª—è —Å–±–æ—Ä–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `golang:1.23.1`).
- –ê –≤–æ –≤—Ç–æ—Ä–æ–π —Å—Ç–∞–¥–∏–∏ –≤–∑—è—Ç—å —Ç–æ–ª—å–∫–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–±–æ—Ä–∫–∏ ‚Äî –±–∏–Ω–∞—Ä–Ω—ã–π —Ñ–∞–π–ª ‚Äî –∏ –ø–æ–ª–æ–∂–∏—Ç—å –µ–≥–æ –≤ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–∑ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `alpine:3.21.3`).

–¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –¥–∞—ë—Ç —Å—Ä–∞–∑—É –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–ª—é—Å–æ–≤:
‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –æ–±—Ä–∞–∑–∞.  
‚úÖ –ù–µ—Ç –ª–∏—à–Ω–∏—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.  
‚úÖ –ë—ã—Å—Ç—Ä–∞—è –∏ –Ω–∞–¥—ë–∂–Ω–∞—è —Å–±–æ—Ä–∫–∞.  
‚úÖ –ü–æ–≤—ã—à–µ–Ω–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–º–µ–Ω—å—à–µ attack surface).

–ê–≤—Ç–æ—Ä: **–û–ª–µ–≥ –ö–æ–∑—ã—Ä–µ–≤**
